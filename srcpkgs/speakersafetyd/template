# Template file for 'speakersafetyd'
pkgname=speakersafetyd
version=0.1.9
revision=1
build_style=cargo
hostmakedepends="alsa-lib pkg-config cargo"
makedepends="alsa-lib-devel"
short_desc="Software Smart Amp implementation"
maintainer="Orphaned <orphan@voidlinux.org>"
license="MIT"
homepage="https://github.com/AsahiLinux/speakersafetyd"
distfiles="https://github.com/AsahiLinux/speakersafetyd/archive/refs/tags/${version}.tar.gz"
checksum=a20d1cc80af156f517161e0ef3e8701388e275c1f5d6719de994ce2c4241d532
make_dirs="/var/lib/speakersafetyd/blackbox 0755 root root"

do_install() {
	vbin target/${XBPS_RUST_TARGET}/release/speakersafetyd
	vinstall 95-speakersafetyd.rules 644 usr/lib/udev/rules.d/

	for f in conf/apple/*; do
		vinstall "$f" 644 usr/share/speakersafetyd/apple
	done

	vlicense LICENSE
	vsv speakersafetyd
}
